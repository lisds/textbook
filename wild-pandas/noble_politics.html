
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Noble politics and comparing counts &#8212; Introduction to Data Science</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://lisds.github.io/textbook/wild-pandas/noble_politics.html" />
    <link rel="shortcut icon" href="../_static/dsfe_favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Handling Pandas safely" href="safe_pandas.html" />
    <link rel="prev" title="Indexing in Pandas" href="pandas_indexing.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/dsfe_logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Introduction to Data Science</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Coding for data
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/what-is-data-science.html">
   What is data science?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/why-data-science.html">
   Why Data Science?
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../intro/tools_techniques.html">
   Tools and techniques
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro/computational-tools.html">
     Computational Tools
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro/statistical-techniques.html">
     Statistical Techniques
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../intro/text-is-data.html">
   Text is data
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro/Plotting_the_Classics.html">
     Plotting the classics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro/Literary_Characters.html">
     Literary characters
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro/Another_Kind_Of_Character.html">
     Another kind of character
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/surviving_computers.html">
   Surviving the computer
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/the_software.html">
   Our tools
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/using_jupyter.html">
   Using Jupyter notebooks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intro/more_on_jupyter.html">
   More on the Jupyter notebook
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  On code
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/to_code.html">
   Ode to code
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/sampling_problem.html">
   A sampling problem
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/three_girls.html">
   A simpler problem
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/variables_intro.html">
   Introduction to variables
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/variables.html">
   Variables in code and mathematics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/Names.html">
   Names and variables
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/Expressions.html">
   Expressions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/functions.html">
   Introduction to functions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/Calls.html">
   Call expressions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code-basics/first_pass_three_girls.html">
   A first pass at the simple problem
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Data types
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../data-types/data_types.html">
   Types of things
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data-types/Numbers.html">
   Numbers
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data-types/Strings.html">
   Strings
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data-types/strings_and_variables.html">
   Strings, variables and expressions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data-types/String_Methods.html">
   String methods
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data-types/Comparison.html">
   Comparisons
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data-types/lists.html">
   Lists
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Arrays
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../arrays/Arrays.html">
   Arrays
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../arrays/Ranges.html">
   Ranges
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../arrays/More_on_Arrays.html">
   More on Arrays
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../arrays/array_indexing.html">
   Selecting values from an array
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../arrays/filling_arrays.html">
   Making and filling arrays.
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../arrays/function_arguments.html">
   Function arguments
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../arrays/rng_choice.html">
   Random choice
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../arrays/boolean_arrays.html">
   Boolean arrays
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../arrays/leaping_ahead.html">
   Leaping ahead
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Iteration
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../iteration/iteration.html">
   Iteration
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../iteration/indentation.html">
   Indentation, indentation, indentation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../iteration/reply_supreme.html">
   Reply to the Supreme Court
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../iteration/inference.html">
   Inference
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Population and permutation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../permutation/population_permutation.html">
   Population and permutation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../permutation/permutation_idea.html">
   The idea of permutation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../permutation/permutation_and_t_test.html">
   Permutation and the t-test
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Data frames
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../data-frames/data_frames.html">
   Data frames
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data-frames/boolean_indexing.html">
   Indexing with Boolean arrays
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data-frames/data_frame_intro.html">
   Introduction to data frames
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data-frames/df_index.html">
   The DataFrame and the index
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data-frames/df_basic_col_indexing.html">
   Selecting columns from DataFrames
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data-frames/df_sort_head_tail.html">
   Sorting, heads and tails
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data-frames/series_like_arrays.html">
   Series are like arrays
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data-frames/df_basic_row_indexing.html">
   Selecting rows from DataFrames
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data-frames/missing_values.html">
   Missing values
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../data-frames/df_plotting.html">
   Pandas plotting methods
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  More building blocks
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../functions-conditionals/more_building_blocks.html">
   More building blocks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../functions-conditionals/introducing_functions.html">
   Introducing Functions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../functions-conditionals/none.html">
   On None
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../functions-conditionals/functions.html">
   Functions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../functions-conditionals/conditional_statements.html">
   Conditional Statements
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../functions-conditionals/functions_as_values.html">
   Functions as values
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../functions-conditionals/apply_functions.html">
   Apply functions
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Pandas, indices and labels
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="pandas_indexing.html">
   Indexing in Pandas
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Noble politics and comparing counts
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="safe_pandas.html">
   Handling Pandas safely
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="text_encoding.html">
   Storing and loading text
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="numbers_and_strings.html">
   Numbers and strings
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  The mean and straight lines
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../mean-slopes/mean.html">
   The mean
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mean-slopes/mean_meaning.html">
   The meaning of the mean
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mean-slopes/mean_and_slopes.html">
   The mean and slopes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mean-slopes/sse_rmse.html">
   Sum of squares, root mean square
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mean-slopes/optimization.html">
   Optimization
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mean-slopes/finding_lines.html">
   Finding lines
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mean-slopes/using_minimize.html">
   Using minimize
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mean-slopes/inference_on_slopes.html">
   Inference on slopes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mean-slopes/combining_boolean_arrays.html">
   Combining boolean arrays
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mean-slopes/standard_scores.html">
   Standard scores
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mean-slopes/Correlation.html">
   Correlation
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Classification
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../classification/classification.html">
   Classification
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../classification/Nearest_Neighbors.html">
   Nearest neighbors
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../classification/Training_and_Testing.html">
   Training and testing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../classification/Rows_of_Tables.html">
   Rows of tables
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../classification/Implementing_the_Classifier.html">
   Implementing the classifier
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../classification/Accuracy_of_the_Classifier.html">
   Accuracy of the classifier
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../classification/Multiple_Regression.html">
   Multiple regression
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../classification/single_multiple.html">
   Simple and multiple regression
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Useful pandas
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../useful-pandas/crosstab.html">
   Cross-tabulation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../useful-pandas/groupby.html">
   The power of groupby
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../useful-pandas/merge.html">
   Merging
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  More on regression
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../more-regression/logistic_regression.html">
   Logistic regression
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Confidence
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../confidence/confidence.html">
   On confidence
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../confidence/bootstrap.html">
   The Bootstrap
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../confidence/havana_math.html">
   A problem for the education minister
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../confidence/Central_Limit_Theorem.html">
   The Central Limit Theorem
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../confidence/large_numbers.html">
   The law of large numbers
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../confidence/laws_of_probability.html">
   Laws of probability
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../confidence/first_bayes.html">
   First Bayes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../confidence/bayes_theorem.html">
   Bayes theorem
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../confidence/bayes_bars.html">
   Bayes and bars
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../confidence/confident_treatment.html">
   Confident treatment
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../confidence/bayes_confidence.html">
   Bayes, confidence
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  The end of the beginning
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../end/end_of_beginning.html">
   The end of the beginning
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Extra pages
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../extra/extra.html">
   Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../extra/more_on_lists.html">
   More on lists
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../extra/introducing_python.html">
   Introduction to Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../extra/brisk_python.html">
   Brisk introduction to Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../extra/pathlib.html">
   Using the
   <code class="docutils literal notranslate">
    <span class="pre">
     pathlib
    </span>
   </code>
   module
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../extra/monty_hall_lists.html">
   The Monty Hall problem, with lists
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../extra/data8_functions.html">
   Data 8 explanation of functions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../extra/mean_deviations.html">
   Why the differences from the mean must add to zero.
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../extra/mean_sq_deviations.html">
   The mean and squared differences
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../extra/slope_deviations.html">
   Mathematics for the least-squares slope
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/lisds/textbook/main?urlpath=lab/tree/wild-pandas/noble_politics.Rmd"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
      <li>
        <a href="https://ds.lis.2i2c.cloud/hub/user-redirect/git-pull?repo=https%3A//github.com/lisds/textbook&urlpath=lab/tree/textbook/wild-pandas/noble_politics.Rmd&branch=main"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on JupyterHub"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_jupyterhub.svg">
  </span>
<span class="headerbtn__text-container">JupyterHub</span>
</a>

      </li>
      
      <li>
        
<button onclick="initThebeSBT()"
  class="headerbtn headerbtn-launch-thebe"
  data-toggle="tooltip"
data-placement="left"
title="Launch Thebe"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="headerbtn__text-container">Live Code</span>
</button>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/lisds/textbook"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/lisds/textbook/issues/new?title=Issue%20on%20page%20%2Fwild-pandas/noble_politics.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/lisds/textbook/edit/main/wild-pandas/noble_politics.Rmd"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/wild-pandas/noble_politics.Rmd"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.Rmd</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setting-the-index">
   Setting the index
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-question">
   The question
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cleaning-up-the-table">
   Cleaning up the table
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#what-do-we-mean-by-chance">
   What do we mean by chance?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#recreating-the-original-data">
   Recreating the original data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-null-world">
   The null world
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#very-similar-to-fisher-s-exact-test">
   Very similar to Fisher’s exact test
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#like-the-chi-squared-test">
   Like the Chi-squared test
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#a-question-for-reflection">
   A question for reflection
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Noble politics and comparing counts</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setting-the-index">
   Setting the index
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-question">
   The question
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cleaning-up-the-table">
   Cleaning up the table
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#what-do-we-mean-by-chance">
   What do we mean by chance?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#recreating-the-original-data">
   Recreating the original data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-null-world">
   The null world
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#very-similar-to-fisher-s-exact-test">
   Very similar to Fisher’s exact test
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#like-the-chi-squared-test">
   Like the Chi-squared test
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#a-question-for-reflection">
   A question for reflection
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="noble-politics-and-comparing-counts">
<h1>Noble politics and comparing counts<a class="headerlink" href="#noble-politics-and-comparing-counts" title="Permalink to this headline">#</a></h1>
<p>This page has two aims:</p>
<ul class="simple">
<li><p>to practice and extend <a class="reference internal" href="pandas_indexing.html"><span class="doc std std-doc">Pandas indexing</span></a>;</p></li>
<li><p>to extend the idea of permutation to data in categories;</p></li>
</ul>
<p>We also ask the question - is politics noble?</p>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Our usual imports</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="c1"># Make random number generator.</span>
<span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">()</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="c1"># Safe setting for Pandas.  Needs Pandas version &gt;= 1.5.</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;mode.copy_on_write&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;fivethirtyeight&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Our data is from this book:</p>
<blockquote>
<div><p>Samuel P. Oliner and Pearl M. Oliner (1988) “The Altruistic Personality:
Rescuers of Jews in Nazi Europe”. Free Press, New York.</p>
</div></blockquote>
<p>See <a class="reference external" href="https://github.com/odsti/datasets/tree/master/oliner1988">the dataset page</a>
for some more details.</p>
<p>The Oliners wanted to identify distinctive traits of people who rescued Jews in
Nazi Europe.  In order to do that, they collected structured interviews with
231 people for whom there was strong documentary evidence that they had
sheltered Jews, despite considerable risk to themselves. These are the
“rescuer” group in the table below.  They also found 126 controls with roughly
similar background, nationality, age and education. Of these, 53 claimed to
have either sheltered Jews, or to have been active in the resistance.  These
are the “actives” group in the table.  This leaves 73 controls who were not
active, and the authors termed these “bystanders”.</p>
<p>The table below has data from table 6.8 of their book, where they break down
the groups according to the answer they gave to the question “Did you belong to
a political party before the war?”.</p>
<p>As usual, if you are running on your own computers, download the file
<a class="reference download internal" download="" href="../_downloads/c9bb319f3dfef38d07415bda013a7ca7/oliner_tab6_8a_1.csv"><code class="xref download docutils literal notranslate"><span class="pre">oliner_tab6_8a_1.csv</span></code></a> to the same
directory as this notebook.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load the table</span>
<span class="n">party_tab</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;oliner_tab6_8a_1.csv&#39;</span><span class="p">)</span>
<span class="n">party_tab</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>party_yn</th>
      <th>rescuer</th>
      <th>active</th>
      <th>bystander</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Yes</td>
      <td>44</td>
      <td>6</td>
      <td>7</td>
    </tr>
    <tr>
      <th>1</th>
      <td>No</td>
      <td>165</td>
      <td>44</td>
      <td>64</td>
    </tr>
    <tr>
      <th>2</th>
      <td>out of</td>
      <td>209</td>
      <td>50</td>
      <td>71</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<section id="setting-the-index">
<h2>Setting the index<a class="headerlink" href="#setting-the-index" title="Permalink to this headline">#</a></h2>
<p>We have already seen <a class="reference internal" href="pandas_indexing.html"><span class="doc std std-doc">Pandas indexing</span></a>.   We are going to be
selecting data out of this table with indexing, and we would like to make the
index (row labels) be as informative as possible.  The current index, which
Pandas created automatically, is sequential numbers, which are not memorable or
informative.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">party_tab</span><span class="o">.</span><span class="n">index</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>RangeIndex(start=0, stop=3, step=1)
</pre></div>
</div>
</div>
</div>
<p>Row labels need not be numbers.  They can also be strings.  Strings are often
more useful in identifying the data in the rows.</p>
<p>We might prefer to use the values in the first column - <code class="docutils literal notranslate"><span class="pre">party_yn</span></code> as the
labels for the rows.</p>
<p>We can do this with the data frame <code class="docutils literal notranslate"><span class="pre">set_index</span></code> method.  It replaces the current
index (the sequential numbers) with the data from a column.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Replace the numerical index with the party_yn labels.</span>
<span class="n">party_tab</span> <span class="o">=</span> <span class="n">party_tab</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;party_yn&#39;</span><span class="p">)</span>
<span class="n">party_tab</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>rescuer</th>
      <th>active</th>
      <th>bystander</th>
    </tr>
    <tr>
      <th>party_yn</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Yes</th>
      <td>44</td>
      <td>6</td>
      <td>7</td>
    </tr>
    <tr>
      <th>No</th>
      <td>165</td>
      <td>44</td>
      <td>64</td>
    </tr>
    <tr>
      <th>out of</th>
      <td>209</td>
      <td>50</td>
      <td>71</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Notice that Pandas took the <code class="docutils literal notranslate"><span class="pre">party_yn</span></code> column out of the data frame and used it
to replace the index.</p>
<p>This makes it easier to use the <code class="docutils literal notranslate"><span class="pre">.loc</span></code> attribute to select data, using row
labels.  For example, we can select individual elements like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># How many rescuers were there, in total?</span>
<span class="n">party_tab</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;out of&#39;</span><span class="p">,</span> <span class="s1">&#39;rescuer&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>209
</pre></div>
</div>
</div>
</div>
</section>
<section id="the-question">
<h2>The question<a class="headerlink" href="#the-question" title="Permalink to this headline">#</a></h2>
<p>Looking at the data in the table, it seems as if the Rescuers had a stronger
tendency to belong to a political party than, say, the Bystanders.</p>
<p>To get more specific, we look at the proportion of Rescuers and Bystanders that
answered Yes (to being a member of a political party before the war).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">out</span> <span class="pre">of</span></code> row has the total number of people in each column.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Proportion of Yes for Rescuers.</span>
<span class="n">party_tab</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;Yes&#39;</span><span class="p">,</span> <span class="s1">&#39;rescuer&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">party_tab</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;out of&#39;</span><span class="p">,</span> <span class="s1">&#39;rescuer&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.21052631578947367
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Proportion of Yes for Bystanders.</span>
<span class="n">party_tab</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;Yes&#39;</span><span class="p">,</span> <span class="s1">&#39;bystander&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">party_tab</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;out of&#39;</span><span class="p">,</span> <span class="s1">&#39;bystander&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.09859154929577464
</pre></div>
</div>
</div>
</div>
<p>That looks like a substantial difference - but could it have come about by
chance?</p>
<p>Let’s put that another way - we see that 44 of 209 Rescuers have “Yes” to
belonging to political party.  Is 44 a larger number than we would expect by
chance?</p>
</section>
<section id="cleaning-up-the-table">
<h2>Cleaning up the table<a class="headerlink" href="#cleaning-up-the-table" title="Permalink to this headline">#</a></h2>
<p>We start by selecting the data we need from the original table.</p>
<p>First we use <code class="docutils literal notranslate"><span class="pre">loc</span></code> indexing to specify that we want:</p>
<ul class="simple">
<li><p>The rows labeled “No” and “Yes”;</p></li>
<li><p>The columns labeled “bystander” and “rescuer”.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bystander_tab</span> <span class="o">=</span> <span class="n">party_tab</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="s1">&#39;No&#39;</span><span class="p">,</span> <span class="s1">&#39;Yes&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;bystander&#39;</span><span class="p">,</span> <span class="s1">&#39;rescuer&#39;</span><span class="p">]]</span>
<span class="n">bystander_tab</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>bystander</th>
      <th>rescuer</th>
    </tr>
    <tr>
      <th>party_yn</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>No</th>
      <td>64</td>
      <td>165</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>7</td>
      <td>44</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p><strong>For reflection</strong>: You could do the same operation with the <code class="docutils literal notranslate"><span class="pre">.drop</span></code> method.
How?</p>
<p>Notice the <em>lists</em> above <code class="docutils literal notranslate"><span class="pre">['Yes',</span> <span class="pre">'No']</span></code> and <code class="docutils literal notranslate"><span class="pre">['bystander',</span> <span class="pre">'rescuer']</span></code>. These
specify the row labels and columns labels that we want.</p>
<p>Notice too that we have swapped the order of the rows (to “No” and “Yes” ) and
the columns (to “bystander” and “rescuer”).  This is to better match the
output of <code class="docutils literal notranslate"><span class="pre">pd.crosstab</span></code> below.  You may see what we mean when we get there.</p>
<p>Now we ask you to cast your eye to the bottom-right value of the table, and
the value of interest — 44.  This is the count for people who were both
“rescuer” and said “Yes” to political party.  We continue our search to see if
this value is larger than we would expect by chance.</p>
</section>
<section id="what-do-we-mean-by-chance">
<h2>What do we mean by chance?<a class="headerlink" href="#what-do-we-mean-by-chance" title="Permalink to this headline">#</a></h2>
<p>Our question above was whether the observed proportions in the table could have
come about by chance.   As usual, our first step is to imagine an ideal (null)
world where rescuers and bystanders have exactly the same tendency to belong to
a political party.  This is the null-model, often called the null hypothesis.</p>
<p>We will take random samples from this world, to see if the random samples look
anything like the numbers we see in the actual data.  If they do, then we might
not be very interested in the differences we see, in the actual data, because
the differences could plausibly have come about as a sample from an ideal world
where there was no difference in tendency to belong to political parties.</p>
<p>So, how do we take samples from this ideal world?</p>
<p>We will take the same number of fake rescuers as there are real rescuers, and
the same number of fake bystanders as there are real bystanders.</p>
<p>We will assume that the same number of people overall are <em>not</em> members of a
political party:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Number of people who did not belong to a political party.</span>
<span class="n">n_no</span> <span class="o">=</span> <span class="n">bystander_tab</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;No&#39;</span><span class="p">,</span> <span class="s1">&#39;rescuer&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">bystander_tab</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;No&#39;</span><span class="p">,</span> <span class="s1">&#39;bystander&#39;</span><span class="p">]</span>
<span class="n">n_no</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>229
</pre></div>
</div>
</div>
</div>
<p>This leaves the rest, who <em>were</em> a member of a political party:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Number of people who did belong to a political party.</span>
<span class="n">n_yes</span> <span class="o">=</span> <span class="n">bystander_tab</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;Yes&#39;</span><span class="p">,</span> <span class="s1">&#39;rescuer&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">bystander_tab</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;Yes&#39;</span><span class="p">,</span> <span class="s1">&#39;bystander&#39;</span><span class="p">]</span>
<span class="n">n_yes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>51
</pre></div>
</div>
</div>
</div>
<p>We can get the same numbers for “Yes” and “No” using the <code class="docutils literal notranslate"><span class="pre">sum</span></code> method of the
data frame, with the <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> argument, to tell sum to operate along the
columns (the second axis):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">row_totals</span> <span class="o">=</span> <span class="n">bystander_tab</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">row_totals</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>party_yn
No     229
Yes     51
dtype: int64
</pre></div>
</div>
</div>
</div>
<p>The total number of people represented in the table is the sum of the “Yes” and
“No” counts:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">row_totals</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>280
</pre></div>
</div>
</div>
</div>
<p>We therefore have 280 labels (51 Yes labels and 229 No labels) to assign to our
280 people (209 rescuers and 71 bystanders).</p>
<p>In our ideal world, this assignment to “Yes” and “No” is random.   We can
shuffle up the labels (“Yes”, “No”), and assign each person (rescuer,
bystander) a shuffled (therefore, random) label.  We take this fake pairing,
and calculate the numbers in each of the four categories, to create a fake
table, that is a random version of the actual table.  If we do that many times,
we can get an idea of how the numbers vary in the fake tables, and therefore,
what randomness looks like, in this ideal world, of no association between
rescuer / bystander and Yes / No.</p>
</section>
<section id="recreating-the-original-data">
<h2>Recreating the original data<a class="headerlink" href="#recreating-the-original-data" title="Permalink to this headline">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">bystander_tab</span></code> table above gives the counts of people in each of the four
categories.  We will call this the Counts Table.</p>
<p>To do the shuffling we need, we reconstruct a new <code class="docutils literal notranslate"><span class="pre">people</span></code> table that has one
row for each person represented in the Counts Table.  We could also call this
the Observations Table.  Instead of having the counts, it reconstructs the
individual entries that correspond to the counts.</p>
<p>There are 280 people represented in the Counts Table, of which:</p>
<ul class="simple">
<li><p>64 are “No” for party membership and “bystander” for respondent type: (“No”,
“bystander) label pair.</p></li>
<li><p>165 are (“No”, “rescuer”)</p></li>
<li><p>7 are “Yes” for party and “bystander” for respondent (“Yes”, “bystander”)</p></li>
<li><p>44 are (“Yes”, “rescuer”)</p></li>
</ul>
<p>Let’s say that the <code class="docutils literal notranslate"><span class="pre">people</span></code> DataFrame has two columns, one for each label that can apply to a person.</p>
<p>The first column is <code class="docutils literal notranslate"><span class="pre">party_yn</span></code> and contains the “Yes” or “No” according to
whether that person was a member of a political party.</p>
<p>The second column is <code class="docutils literal notranslate"><span class="pre">respondent</span></code> and contains <code class="docutils literal notranslate"><span class="pre">bystander</span></code> if the person was a
bystander, and <code class="docutils literal notranslate"><span class="pre">rescuer</span></code> if they were a rescuer.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">people</span></code> DataFrame would have:</p>
<ul class="simple">
<li><p>64 rows with “No” in <code class="docutils literal notranslate"><span class="pre">party_yn</span></code> and “bystander” in <code class="docutils literal notranslate"><span class="pre">respondent</span></code>;</p></li>
<li><p>165 rows with “No” in <code class="docutils literal notranslate"><span class="pre">party_yn</span></code> and “rescuer” in <code class="docutils literal notranslate"><span class="pre">respondent</span></code>;</p></li>
<li><p>7 rows with “Yes” in <code class="docutils literal notranslate"><span class="pre">party_yn</span></code> and “bystander” in <code class="docutils literal notranslate"><span class="pre">respondent</span></code>;</p></li>
<li><p>44 rows with “Yes” in <code class="docutils literal notranslate"><span class="pre">party_yn</span></code> and “rescuer” in <code class="docutils literal notranslate"><span class="pre">respondent</span></code>;</p></li>
</ul>
<p>Our approach will be to make a DataFrame that contains all four possible label
pairs, and then repeat each of the rows by their respective counts (64, 165, 7,
44).</p>
<p>the DataFrame with the four possible label pairs.</p>
<p>We will do that using a <em>list of lists</em>.</p>
<p>Here is a list with the first label pair.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">first_label_pair</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;No&#39;</span><span class="p">,</span> <span class="s1">&#39;bystander&#39;</span><span class="p">]</span>
<span class="n">first_label_pair</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;No&#39;, &#39;bystander&#39;]
</pre></div>
</div>
</div>
</div>
<p>We want to make a DataFrame that starts with 64 of these pairs.  We can do this using the <code class="docutils literal notranslate"><span class="pre">pd.DataFrame</span></code> constructor with a <em>list of lists</em>.  For example, here we make a new DataFrame with two <em>rows</em>,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">first_two_pairs</span> <span class="o">=</span> <span class="p">[</span><span class="n">first_label_pair</span><span class="p">,</span> <span class="n">first_label_pair</span><span class="p">]</span>
<span class="n">first_two_pairs</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[&#39;No&#39;, &#39;bystander&#39;], [&#39;No&#39;, &#39;bystander&#39;]]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">first_two_pairs</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">first_two_pairs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;No&#39;, &#39;bystander&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">first_two_pairs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;No&#39;, &#39;bystander&#39;]
</pre></div>
</div>
</div>
</div>
<p>In fact we can make multiple copies of a list by using the multiply (<code class="docutils literal notranslate"><span class="pre">*</span></code>) operator, like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Multiply on a list means &#39;replicate&#39;.</span>
<span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">my_list</span> <span class="o">*</span> <span class="mi">4</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, 2, 1, 2, 1, 2, 1, 2]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">another_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">99</span><span class="p">]</span>
<span class="n">another_list</span> <span class="o">*</span> <span class="mi">3</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[99, 99, 99]
</pre></div>
</div>
</div>
</div>
<p>Notice that multiply (<code class="docutils literal notranslate"><span class="pre">*</span></code>) behaves completely differently for <em>arrays</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Multiply on an array means elementwise multiplication.</span>
<span class="n">my_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="n">my_array</span> <span class="o">*</span> <span class="mi">4</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([4, 8])
</pre></div>
</div>
</div>
</div>
<p>Now we can replicate the initial pair with a list of lists and multipication:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">first_three_pairs</span> <span class="o">=</span> <span class="p">[</span><span class="n">first_label_pair</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span>
<span class="n">first_three_pairs</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[&#39;No&#39;, &#39;bystander&#39;], [&#39;No&#39;, &#39;bystander&#39;], [&#39;No&#39;, &#39;bystander&#39;]]
</pre></div>
</div>
</div>
</div>
<p>The reason this is useful, is that we can then use the <code class="docutils literal notranslate"><span class="pre">pd.DataFrame</span></code> constructor to convert the list of lists into rows of a DataFrame:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Using a list of lists to define first three rows of DataFrame</span>
<span class="n">first_three_rows</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">first_three_pairs</span><span class="p">)</span>
<span class="n">first_three_rows</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>1</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>2</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>With that simple call, the DataFrame has default column labels of 0 and 1.  We
can specify more useful and memorable column labels with the <code class="docutils literal notranslate"><span class="pre">columns=</span></code>
argument to the <code class="docutils literal notranslate"><span class="pre">pd.DataFrame</span></code> constructor:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">first_three_rows</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">first_three_pairs</span><span class="p">,</span>
                                <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;party_yn&#39;</span><span class="p">,</span> <span class="s1">&#39;respondent&#39;</span><span class="p">])</span>
<span class="n">first_three_rows</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>party_yn</th>
      <th>respondent</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>1</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>2</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We want our new <em>observations</em> DataFrame to start with 64 observations.  Remember, 64 is the count for the label combination of ‘No’, ‘bystander’:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bystander_tab</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;No&#39;</span><span class="p">,</span> <span class="s1">&#39;bystander&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">no_bystander_row_list</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;No&#39;</span><span class="p">,</span> <span class="s1">&#39;bystander&#39;</span><span class="p">]]</span> <span class="o">*</span> <span class="mi">64</span>
<span class="c1"># Show the first 5 lists in the list of lists</span>
<span class="n">no_bystander_row_list</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[&#39;No&#39;, &#39;bystander&#39;],
 [&#39;No&#39;, &#39;bystander&#39;],
 [&#39;No&#39;, &#39;bystander&#39;],
 [&#39;No&#39;, &#39;bystander&#39;],
 [&#39;No&#39;, &#39;bystander&#39;]]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Convert the list of lists into a DataFrame</span>
<span class="n">no_bystander_observations</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="n">no_bystander_row_list</span><span class="p">,</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;party_yn&#39;</span><span class="p">,</span> <span class="s1">&#39;bystander&#39;</span><span class="p">])</span>
<span class="n">no_bystander_observations</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>party_yn</th>
      <th>bystander</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>1</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>2</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>3</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>4</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>59</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>60</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>61</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>62</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>63</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
  </tbody>
</table>
<p>64 rows × 2 columns</p>
</div></div></div>
</div>
<p>How do we add the next 165 rows, with label pair ‘No’, ‘rescuer’:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bystander_tab</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;No&#39;</span><span class="p">,</span> <span class="s1">&#39;rescuer&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>165
</pre></div>
</div>
</div>
</div>
<p>We first make the list of lists corresponding to the rows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">no_rescuer_row_list</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;No&#39;</span><span class="p">,</span> <span class="s1">&#39;rescuer&#39;</span><span class="p">]]</span> <span class="o">*</span> <span class="mi">165</span>
<span class="c1"># Show the first 5 lists in the list of lists.</span>
<span class="n">no_rescuer_row_list</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[&#39;No&#39;, &#39;rescuer&#39;],
 [&#39;No&#39;, &#39;rescuer&#39;],
 [&#39;No&#39;, &#39;rescuer&#39;],
 [&#39;No&#39;, &#39;rescuer&#39;],
 [&#39;No&#39;, &#39;rescuer&#39;]]
</pre></div>
</div>
</div>
</div>
<p>Next we use another aspect of lists - <em>addition</em>.  As multiplication of a list replicates the elements in the list, so addition appends the elements of one list to another:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Addition of two lists appends the second list to the first.</span>
<span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">another_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">99</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
<span class="n">my_list</span> <span class="o">+</span> <span class="n">another_list</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, 2, 99, 100]
</pre></div>
</div>
</div>
</div>
<p>Remember, this is different from addition with <em>arrays</em>, which does elementwise addition:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Addition of two arrays gives elementwise addition.</span>
<span class="n">my_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="n">another_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">99</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
<span class="n">my_array</span> <span class="o">+</span> <span class="n">another_array</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([100, 102])
</pre></div>
</div>
</div>
</div>
<p>If we <em>add</em> the first list of lists to the second list of lists, we get the 64 + 165 lists, and therefore, 64 + 165 rows.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">both_no_row_list</span> <span class="o">=</span> <span class="n">no_bystander_row_list</span> <span class="o">+</span> <span class="n">no_rescuer_row_list</span>
<span class="nb">len</span><span class="p">(</span><span class="n">both_no_row_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>229
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">both_no_observations</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">both_no_row_list</span><span class="p">,</span>
                                   <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;party_yn&#39;</span><span class="p">,</span> <span class="s1">&#39;respondent&#39;</span><span class="p">])</span>
<span class="n">both_no_observations</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>party_yn</th>
      <th>respondent</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>1</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>2</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>3</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>4</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>224</th>
      <td>No</td>
      <td>rescuer</td>
    </tr>
    <tr>
      <th>225</th>
      <td>No</td>
      <td>rescuer</td>
    </tr>
    <tr>
      <th>226</th>
      <td>No</td>
      <td>rescuer</td>
    </tr>
    <tr>
      <th>227</th>
      <td>No</td>
      <td>rescuer</td>
    </tr>
    <tr>
      <th>228</th>
      <td>No</td>
      <td>rescuer</td>
    </tr>
  </tbody>
</table>
<p>229 rows × 2 columns</p>
</div></div></div>
</div>
<p>Let’s assemble the whole observations DataFrame in one go:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">row_lists</span> <span class="o">=</span> <span class="p">(</span>
    <span class="c1"># The No rows</span>
    <span class="p">[[</span><span class="s1">&#39;No&#39;</span><span class="p">,</span> <span class="s1">&#39;bystander&#39;</span><span class="p">]]</span> <span class="o">*</span> <span class="n">bystander_tab</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;No&#39;</span><span class="p">,</span> <span class="s1">&#39;bystander&#39;</span><span class="p">]</span> <span class="o">+</span>
    <span class="p">[[</span><span class="s1">&#39;No&#39;</span><span class="p">,</span> <span class="s1">&#39;rescuer&#39;</span><span class="p">]]</span> <span class="o">*</span> <span class="n">bystander_tab</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;No&#39;</span><span class="p">,</span> <span class="s1">&#39;rescuer&#39;</span><span class="p">]</span> <span class="o">+</span>
    <span class="c1"># The Yes rows</span>
    <span class="p">[[</span><span class="s1">&#39;Yes&#39;</span><span class="p">,</span> <span class="s1">&#39;bystander&#39;</span><span class="p">]]</span> <span class="o">*</span> <span class="n">bystander_tab</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;Yes&#39;</span><span class="p">,</span> <span class="s1">&#39;bystander&#39;</span><span class="p">]</span> <span class="o">+</span>
    <span class="p">[[</span><span class="s1">&#39;Yes&#39;</span><span class="p">,</span> <span class="s1">&#39;rescuer&#39;</span><span class="p">]]</span> <span class="o">*</span> <span class="n">bystander_tab</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;Yes&#39;</span><span class="p">,</span> <span class="s1">&#39;rescuer&#39;</span><span class="p">]</span>
<span class="p">)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">row_lists</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>280
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># The first 5 lists:</span>
<span class="n">row_lists</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[&#39;No&#39;, &#39;bystander&#39;],
 [&#39;No&#39;, &#39;bystander&#39;],
 [&#39;No&#39;, &#39;bystander&#39;],
 [&#39;No&#39;, &#39;bystander&#39;],
 [&#39;No&#39;, &#39;bystander&#39;]]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># The last 5 lists</span>
<span class="n">row_lists</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[&#39;Yes&#39;, &#39;rescuer&#39;],
 [&#39;Yes&#39;, &#39;rescuer&#39;],
 [&#39;Yes&#39;, &#39;rescuer&#39;],
 [&#39;Yes&#39;, &#39;rescuer&#39;],
 [&#39;Yes&#39;, &#39;rescuer&#39;]]
</pre></div>
</div>
</div>
</div>
<p>Now we can construct the observations DataFrame from the list of lists that define the rows.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Make the rows for &quot;party_yn&quot; and &quot;bystander&quot; by repeating rows from pairs.</span>
<span class="n">people</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">row_lists</span><span class="p">,</span>
                      <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;party_yn&#39;</span><span class="p">,</span> <span class="s1">&#39;respondent&#39;</span><span class="p">])</span>
<span class="n">people</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>party_yn</th>
      <th>respondent</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>1</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>2</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>3</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>4</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>275</th>
      <td>Yes</td>
      <td>rescuer</td>
    </tr>
    <tr>
      <th>276</th>
      <td>Yes</td>
      <td>rescuer</td>
    </tr>
    <tr>
      <th>277</th>
      <td>Yes</td>
      <td>rescuer</td>
    </tr>
    <tr>
      <th>278</th>
      <td>Yes</td>
      <td>rescuer</td>
    </tr>
    <tr>
      <th>279</th>
      <td>Yes</td>
      <td>rescuer</td>
    </tr>
  </tbody>
</table>
<p>280 rows × 2 columns</p>
</div></div></div>
</div>
<p>We check the counts in the <code class="docutils literal notranslate"><span class="pre">people</span></code> data frame by doing some row selection. For
example, to check we really do have 64 rows with the label “No” in <code class="docutils literal notranslate"><span class="pre">party_yn</span></code>
and “bystander” in <code class="docutils literal notranslate"><span class="pre">respondent</span></code>, we could do this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">no_rows</span> <span class="o">=</span> <span class="n">people</span><span class="p">[</span><span class="n">people</span><span class="p">[</span><span class="s1">&#39;party_yn&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;No&#39;</span><span class="p">]</span>
<span class="n">no_bystander_rows</span> <span class="o">=</span> <span class="n">no_rows</span><span class="p">[</span><span class="n">no_rows</span><span class="p">[</span><span class="s1">&#39;respondent&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;bystander&#39;</span><span class="p">]</span>
<span class="nb">len</span><span class="p">(</span><span class="n">no_bystander_rows</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>64
</pre></div>
</div>
</div>
</div>
<p>Luckily, Pandas has a <code class="docutils literal notranslate"><span class="pre">crosstab</span></code> function that does this counting work for us,
for all four combinations of “Yes”, “No” and “bystander”, “rescuer”.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">people_tab</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">people</span><span class="p">[</span><span class="s1">&#39;party_yn&#39;</span><span class="p">],</span> <span class="n">people</span><span class="p">[</span><span class="s1">&#39;respondent&#39;</span><span class="p">])</span>
<span class="n">people_tab</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>respondent</th>
      <th>bystander</th>
      <th>rescuer</th>
    </tr>
    <tr>
      <th>party_yn</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>No</th>
      <td>64</td>
      <td>165</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>7</td>
      <td>44</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>As we hoped, the <code class="docutils literal notranslate"><span class="pre">pd.crosstab</span></code> on the <code class="docutils literal notranslate"><span class="pre">people</span></code> data frame regenerates the
counts Table we started with.</p>
<p>We have used <code class="docutils literal notranslate"><span class="pre">pd.crosstab</span></code> to reconstruct the Counts Table from our
Observations Table.</p>
</section>
<section id="the-null-world">
<h2>The null world<a class="headerlink" href="#the-null-world" title="Permalink to this headline">#</a></h2>
<p>The null or ideal world for our question is a world where the pairing of the
<code class="docutils literal notranslate"><span class="pre">party_yn</span></code> “Yes” / “No” labels and the <code class="docutils literal notranslate"><span class="pre">respondent</span></code> “bystander” / “rescuer”
labels are random.</p>
<p>We can make a data frame from that world doing a random shuffle of the
<code class="docutils literal notranslate"><span class="pre">party_yn</span></code> labels in our Observations Table, so the pairing of the <code class="docutils literal notranslate"><span class="pre">party_yn</span></code>
and <code class="docutils literal notranslate"><span class="pre">respondent</span></code> labels is random.</p>
<p>First pull out the <code class="docutils literal notranslate"><span class="pre">party_yn</span></code> and <code class="docutils literal notranslate"><span class="pre">respondent</span></code> columns for later use.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">party_yn</span> <span class="o">=</span> <span class="n">people</span><span class="p">[</span><span class="s1">&#39;party_yn&#39;</span><span class="p">]</span>
<span class="n">respondent</span> <span class="o">=</span> <span class="n">people</span><span class="p">[</span><span class="s1">&#39;respondent&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Remember, the crosstab of these columns gives the original count table:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">party_yn</span><span class="p">,</span> <span class="n">respondent</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>respondent</th>
      <th>bystander</th>
      <th>rescuer</th>
    </tr>
    <tr>
      <th>party_yn</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>No</th>
      <td>64</td>
      <td>165</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>7</td>
      <td>44</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Next, shuffle the <code class="docutils literal notranslate"><span class="pre">party_yn</span></code> values.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">shuffled_party</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">permutation</span><span class="p">(</span><span class="n">party_yn</span><span class="p">)</span>
<span class="c1"># Show the first ten values</span>
<span class="n">shuffled_party</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([&#39;No&#39;, &#39;No&#39;, &#39;No&#39;, &#39;No&#39;, &#39;No&#39;, &#39;No&#39;, &#39;No&#39;, &#39;No&#39;, &#39;No&#39;, &#39;No&#39;],
      dtype=object)
</pre></div>
</div>
</div>
</div>
<p>Show the new shuffled <code class="docutils literal notranslate"><span class="pre">party_yn</span></code> values with the original respondent labels:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fake_people</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="n">fake_people</span><span class="p">[</span><span class="s1">&#39;party_yn&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">shuffled_party</span>
<span class="n">fake_people</span><span class="p">[</span><span class="s1">&#39;respondent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">respondent</span>
<span class="n">fake_people</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>party_yn</th>
      <th>respondent</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>1</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>2</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>3</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>4</th>
      <td>No</td>
      <td>bystander</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>275</th>
      <td>Yes</td>
      <td>rescuer</td>
    </tr>
    <tr>
      <th>276</th>
      <td>No</td>
      <td>rescuer</td>
    </tr>
    <tr>
      <th>277</th>
      <td>Yes</td>
      <td>rescuer</td>
    </tr>
    <tr>
      <th>278</th>
      <td>No</td>
      <td>rescuer</td>
    </tr>
    <tr>
      <th>279</th>
      <td>No</td>
      <td>rescuer</td>
    </tr>
  </tbody>
</table>
<p>280 rows × 2 columns</p>
</div></div></div>
</div>
<p>By the way — we only care about the random pairing between <code class="docutils literal notranslate"><span class="pre">party_yn</span></code> and
<code class="docutils literal notranslate"><span class="pre">respondent</span></code>.  We shuffled <code class="docutils literal notranslate"><span class="pre">party_yn</span></code> above, but we could instead have shuffled
<code class="docutils literal notranslate"><span class="pre">respondent</span></code>, or both; any of these would generate a random pairing.</p>
<p>We now need the counts of people in each category.  That is we need counts for:</p>
<ul class="simple">
<li><p>‘No’ paired with ‘bystander’</p></li>
<li><p>‘Yes’ paired with ‘bystander’</p></li>
<li><p>‘No’ paired with ‘rescuer’</p></li>
<li><p>‘Yes’ paired with ‘rescuer’</p></li>
</ul>
<p>For example, remember we are particularly interested in the combination of
“Yes” and “rescuer”.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fake_tab</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">shuffled_party</span><span class="p">,</span> <span class="n">respondent</span><span class="p">)</span>
<span class="n">fake_tab</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>respondent</th>
      <th>bystander</th>
      <th>rescuer</th>
    </tr>
    <tr>
      <th>row_0</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>No</th>
      <td>59</td>
      <td>170</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>12</td>
      <td>39</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We saw in the original data that the rescuers seemed to have a greater tendency
to belong to a political party.  Let us restrict our attention to the count of
“Yes” and “rescuer”.</p>
<p>That count, in our original Counts Table, was:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">actual_y_resc</span> <span class="o">=</span> <span class="n">bystander_tab</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;Yes&#39;</span><span class="p">,</span> <span class="s1">&#39;rescuer&#39;</span><span class="p">]</span>
<span class="n">actual_y_resc</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>44
</pre></div>
</div>
</div>
</div>
<p>The equivalent count in our new fake Counts Table is:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fake_y_resc</span> <span class="o">=</span> <span class="n">fake_tab</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;Yes&#39;</span><span class="p">,</span> <span class="s1">&#39;rescuer&#39;</span><span class="p">]</span>
<span class="n">fake_y_resc</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>39
</pre></div>
</div>
</div>
</div>
<p>We need more random samples to see if the fake value is often as large as the
real value.  If so, then the ideal world, where the association between “Yes” /
“No, and “bystander” / “rescuer” is random, is a reasonable explanation of what
we see in the real world, and we might not want to investigate these data much
further.</p>
<p>Unfortunately, <code class="docutils literal notranslate"><span class="pre">pd.crosstab</span></code> is horribly slow, so we need to drop our usual
number of iterations to 1000 to keep the run-time down.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">counts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
    <span class="c1"># Make a fake Observations Table by shuffling one set of labels.</span>
    <span class="n">shuffled_party</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">permutation</span><span class="p">(</span><span class="n">party_yn</span><span class="p">)</span>
    <span class="c1"># Get the Counts Table from the fake Observations Table.</span>
    <span class="n">fake_tab</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">shuffled_party</span><span class="p">,</span> <span class="n">respondent</span><span class="p">)</span>
    <span class="c1"># Store the count of interest.</span>
    <span class="n">counts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">fake_tab</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;Yes&#39;</span><span class="p">,</span> <span class="s1">&#39;rescuer&#39;</span><span class="p">]</span>
<span class="c1"># Show the first 10 counts.</span>
<span class="n">counts</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([43., 34., 40., 35., 42., 42., 44., 40., 39., 37.])
</pre></div>
</div>
</div>
</div>
<p>Here is our <em>sampling distribution</em> from sampling in the ideal world:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">counts</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/noble_politics_90_0.png" src="../_images/noble_politics_90_0.png" />
</div>
</div>
<p>How unusual is the actual value, in this ideal world?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Proportion of times we see ideal world sample &gt;= actual value.</span>
<span class="n">p_lte</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">(</span><span class="n">counts</span> <span class="o">&gt;=</span> <span class="n">actual_y_resc</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span>
<span class="n">p_lte</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.027
</pre></div>
</div>
</div>
</div>
</section>
<section id="very-similar-to-fisher-s-exact-test">
<h2>Very similar to Fisher’s exact test<a class="headerlink" href="#very-similar-to-fisher-s-exact-test" title="Permalink to this headline">#</a></h2>
<p>The Fisher’s exact test is the test that Fisher invented for the <a class="reference internal" href="fishers_tea.html"><span class="doc std std-doc">Lady Tasting
Tea</span></a> problem.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">scipy.stats</span> <span class="k">as</span> <span class="nn">sps</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># alternative=&#39;greater&#39; actually refers to the probability that a sampling</span>
<span class="c1"># distribution top-left value will be greater than or equal to the observed</span>
<span class="c1"># top-left value, but for reasons given below, this is the same as the test</span>
<span class="c1"># on the bottom-right value, that we are interested in.</span>
<span class="n">odds_ratio</span><span class="p">,</span> <span class="n">p_val</span> <span class="o">=</span> <span class="n">sps</span><span class="o">.</span><span class="n">fisher_exact</span><span class="p">(</span><span class="n">bystander_tab</span><span class="p">,</span> <span class="n">alternative</span><span class="o">=</span><span class="s1">&#39;greater&#39;</span><span class="p">)</span>
<span class="n">p_val</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.02267232069219596
</pre></div>
</div>
</div>
</div>
</section>
<section id="like-the-chi-squared-test">
<h2>Like the Chi-squared test<a class="headerlink" href="#like-the-chi-squared-test" title="Permalink to this headline">#</a></h2>
<p>Another common test for this sort of situation is the <a class="reference external" href="https://en.wikipedia.org/wiki/Chi-squared_test">Chi-squared
test</a>.</p>
<p>The Chi-squared test tests the table values against the null hypothesis that
there is no (null, not-any) tendency for (in our case) the Party membership
labels to differ between the Rescuer and Bystander groups.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Standard Chi-squared test, without Yates correction for 2x2 tables.</span>
<span class="n">chi2_val</span><span class="p">,</span> <span class="n">p_val</span><span class="p">,</span> <span class="n">degf</span><span class="p">,</span> <span class="n">expected</span> <span class="o">=</span> <span class="n">sps</span><span class="o">.</span><span class="n">chi2_contingency</span><span class="p">(</span><span class="n">people_tab</span><span class="p">,</span>
                                                       <span class="n">correction</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">p_val</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.03474922601463277
</pre></div>
</div>
</div>
</div>
<p>The Chi-squared test is asking a slightly different question from our original
test.   Our original test was a <em>one-tailed</em> test, in the sense that it has a
<em>direction</em>.  We are specifically interested in whether the null-world
generates values <em>as low as</em> 44, but we were not interested in whether the
null-world generates values that are <em>greater</em> than those we would expect by
chance.  The Chi-squared test is against a null-world where there is no
deviation from random association <em>in either direction</em>.  Hence the
<em>not-directional</em> Chi-squared test has a higher probability than our
<em>directional</em> randomization test, because we have to allow for chance
deviations in either direction.</p>
</section>
<section id="a-question-for-reflection">
<h2>A question for reflection<a class="headerlink" href="#a-question-for-reflection" title="Permalink to this headline">#</a></h2>
<p>Now look at this.  Here I do the same test, but I am looking at both of these
counts, for each trial:</p>
<ul class="simple">
<li><p>“Yes”, “rescuer”.</p></li>
<li><p>“No”, “bystander”.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Yes, rescuer</span>
<span class="n">counts_y_resc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="c1"># No, rescuer</span>
<span class="n">counts_n_by</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
    <span class="c1"># Make a fake Observations Table by shuffling one set of labels.</span>
    <span class="n">shuffled_party</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">permutation</span><span class="p">(</span><span class="n">party_yn</span><span class="p">)</span>
    <span class="n">fake_data</span> <span class="o">=</span> <span class="n">people</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">fake_data</span><span class="p">[</span><span class="s1">&#39;party_yn&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">shuffled_party</span>
    <span class="c1"># Get the Counts Table from the fake Observations Table.</span>
    <span class="n">fake_tab</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">fake_data</span><span class="p">[</span><span class="s1">&#39;party_yn&#39;</span><span class="p">],</span> <span class="n">fake_data</span><span class="p">[</span><span class="s1">&#39;respondent&#39;</span><span class="p">])</span>
    <span class="c1"># Store the &quot;Yes&quot; / &quot;rescuer&quot; count.</span>
    <span class="n">counts_y_resc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">fake_tab</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;Yes&#39;</span><span class="p">,</span> <span class="s1">&#39;rescuer&#39;</span><span class="p">]</span>
    <span class="c1"># Also store the &quot;No&quot; / &quot;bystander&quot; count.</span>
    <span class="n">counts_n_by</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">fake_tab</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;No&#39;</span><span class="p">,</span> <span class="s1">&#39;bystander&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Here are the values of the “Yes” / “rescuer” counts for the first 10 trials.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># First ten Yes rescuer counts</span>
<span class="n">counts_y_resc</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([44., 37., 32., 40., 40., 40., 34., 41., 39., 40.])
</pre></div>
</div>
</div>
</div>
<p>These are the corresponding “No” / “bystander” counts:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># First ten No bystander counts</span>
<span class="n">counts_n_by</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([64., 57., 52., 60., 60., 60., 54., 61., 59., 60.])
</pre></div>
</div>
</div>
</div>
<p>You may notice that they go up and down in exactly the same way.  When the
“Yes” / “rescuer” count goes up or down by 1, so does the “No” / “bystander”
count - and the same is true for any change in the values; +1, +2, +3 …, -1,
-2, -3 …</p>
<p>Therefore, the <em>difference</em> between the counts on each trial is always the
same.  In our case, the difference is -20:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># The difference between the counts for each trial is always the same.</span>
<span class="n">count_diff</span> <span class="o">=</span> <span class="n">counts_y_resc</span> <span class="o">-</span> <span class="n">counts_n_by</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;First 10 differences&#39;</span><span class="p">,</span> <span class="n">count_diff</span><span class="p">[:</span><span class="mi">10</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Differences all the same?&quot;</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">count_diff</span> <span class="o">==</span> <span class="n">count_diff</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>First 10 differences [-20. -20. -20. -20. -20. -20. -20. -20. -20. -20.]
Differences all the same?
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>If we know the “Yes” / “rescuer” value, we can get the corresponding “No” /
“bystander” value by subtracting -20 (in our particular case).</p>
<p>This means that if we calculate the corresponding p values for the “Yes” /
“rescuer” or “No” / “bystander” counts, they are exactly the same.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Proportion of times we see ideal world sample &gt;= actual value.</span>
<span class="n">p_lte_y_resc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">(</span><span class="n">counts_y_resc</span> <span class="o">&gt;=</span> <span class="n">actual_y_resc</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span>
<span class="n">p_lte_y_resc</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.018
</pre></div>
</div>
</div>
</div>
<p>The test for “No”, “bystander” follows.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Proportion of times we see ideal world sample &gt;= actual value.</span>
<span class="n">actual_n_by</span> <span class="o">=</span> <span class="n">bystander_tab</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;No&#39;</span><span class="p">,</span> <span class="s1">&#39;bystander&#39;</span><span class="p">]</span>
<span class="n">p_lte_n_by</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">(</span><span class="n">counts_n_by</span> <span class="o">&gt;=</span> <span class="n">actual_n_by</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span>
<span class="n">p_lte_n_by</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.018
</pre></div>
</div>
</div>
</div>
<p>See if you can work out why these counts go up and down in exactly the same
way, on each trial.  Why does this mean that the p values must be the same?</p>
<p>After a little reflection, have a look at the <a class="reference internal" href="two_by_two_tables.html"><span class="doc std std-doc">2 by 2
tables</span></a> page.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "lisds/textbook",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./wild-pandas"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="pandas_indexing.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Indexing in Pandas</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="safe_pandas.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Handling Pandas safely</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Matthew Brett, Ani Adhikari, John Denero, David Wagner<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>